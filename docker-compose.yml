# 最精简版 docker-compose.yml
# 仅保留 Flask 运行必需的环境变量
# 其他所有配置通过 Web 界面设置：http://localhost:5000/config

version: '3.8'

services:
  web:
    build: .
    container_name: sht_web
    ports:
      - "5000:5000"
    volumes:
      - ./data:/app/data
    environment:
      # Flask 运行必需
      - FLASK_APP=/app/app.py
      - FLASK_ENV=production
      - PYTHONPATH=/app
    restart: unless-stopped

# 使用说明：
# 1. 启动容器：docker-compose up -d
# 2. 访问 http://localhost:5000/config 配置 Token、代理等
# 3. SECRET_KEY 会自动生成并保存
